{% extends 'homepage/base.html' %}


{% block title %}
teams
{% endblock %}

{% block body %}
<p>team :</p>

{{user.team_profile.role}}

<li class="list-group-item">name - {{team.name}}</li>
<li class="list-group-item">city - {{team.city}}</li>
<li class="list-group-item">description - {{team.description}}</li>

<li class="list-group-item">id - {{team.id}}</li>
<li class="list-group-item">created_at - {{team.created_at}}</li>
<li class="list-group-item">edited_at - {{team.edited_at}}</li>
<li class="list-group-item">is_private - {{team.is_private}}</li>
<img src={{team.chevron.url }}>

{% if user  in team.members.all %}

{%else%}
<form method="post"> {% csrf_token %} <button class="btn btn-outline-primary btn-sm" name="add_request" value="add_request" type="submit"> request </button></form>
{%endif%}





<p><li class="list-group-item">user request</li></p>
<form method="post"> {% csrf_token %}
{%for request in team.team_request.all %}
<li class="list-group-item">name - {{ request }}  userid - {{ request.user.id }}  reqID-{{request.id}}</li>

    <button class="btn  btn-outline-secondary btn-sm" name="add" value="{{request.id}}"  type="submit">
        add </button>

    <button class="btn btn-outline-secondary btn-sm" name="refuse" value="{{request.id}}"  type="submit">
        refuse </button>
</form>
{%endfor%}


<p><li class="list-group-item">Member list</li></p>
<form method="post"> {% csrf_token %}
{%for member in team.team_members.all %}
<li class="list-group-item">user -{{ member.user }} id - {{ member.user.id }} created_at -{{member.created_at}} edited -{{member.edited_at}}role - {{member.get_role_display}}</li>
    <form method="post"> {% csrf_token %}
    <button class="btn btn-outline-secondary btn-sm" name="kick" value="{{member.user.id}}"  type="submit">
        kick </button>
</form>
{%endfor%}

<p><li class="list-group-item">Event list</li></p>
<form method="post"> {% csrf_token %}

    <button class="btn btn-outline-secondary btn-sm" name="reg_on_vote" value="{{vote.id}}"  type="submit">
        reg_based_on_vote</button>
    <button class="btn btn-outline-secondary btn-sm" name="remove_vote" value="{{vote.id}}"  type="submit">
        remove_vote</button>

    {%for vote in team.event_vote.all %}
<li class="list-group-item">do we go to - {{ vote.event }}? </li>


    <form method="post"> {% csrf_token %}
    <button class="btn btn-outline-secondary btn-sm" name="yes" value="{{vote.id}}"
            type="submit">Yes:{{vote.yes.count}}
    </button>
        <button
                class="btn btn-outline-secondary btn-sm" name="no" value="{{vote.id}}"
                type="submit">
        No:{{vote.no.count}}
        </button>
</form>
{%endfor%}







{% endblock %}